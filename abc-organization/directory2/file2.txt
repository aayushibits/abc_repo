Updated code for directory2
